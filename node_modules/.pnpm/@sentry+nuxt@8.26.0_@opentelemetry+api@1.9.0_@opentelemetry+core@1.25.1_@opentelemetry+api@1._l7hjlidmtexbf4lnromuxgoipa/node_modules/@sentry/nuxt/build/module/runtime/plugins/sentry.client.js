import { getClient } from "@sentry/core";
import { browserTracingIntegration, vueIntegration } from "@sentry/vue";
import { defineNuxtPlugin } from "nuxt/app";
export default defineNuxtPlugin((nuxtApp) => {
  if (typeof __SENTRY_TRACING__ === "undefined" || __SENTRY_TRACING__) {
    const sentryClient = getClient();
    if (sentryClient && "$router" in nuxtApp) {
      sentryClient.addIntegration(
        browserTracingIntegration({ router: nuxtApp.$router, routeLabel: "path" })
      );
    }
  }
  nuxtApp.hook("app:created", (vueApp) => {
    const sentryClient = getClient();
    if (sentryClient) {
      sentryClient.addIntegration(vueIntegration({ app: vueApp }));
    }
  });
});
